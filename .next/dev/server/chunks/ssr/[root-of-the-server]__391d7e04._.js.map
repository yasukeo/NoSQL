{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasukeo/Desktop/NoSQL/flight-management/src/hooks/useAuth.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { User } from '@/types';\r\n\r\nexport function useAuth(requiredRole?: 'admin' | 'client') {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const checkAuth = () => {\r\n      try {\r\n        const storedUser = localStorage.getItem('user');\r\n        if (storedUser) {\r\n          const parsedUser = JSON.parse(storedUser) as User;\r\n          \r\n          // Vérifier le rôle si requis\r\n          if (requiredRole && parsedUser.role !== requiredRole) {\r\n            // Rediriger vers la page appropriée\r\n            if (parsedUser.role === 'admin') {\r\n              router.push('/admin');\r\n            } else {\r\n              router.push('/client');\r\n            }\r\n            return;\r\n          }\r\n          \r\n          setUser(parsedUser);\r\n        } else if (requiredRole) {\r\n          // Si un rôle est requis mais pas d'utilisateur, rediriger vers login\r\n          router.push('/login');\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur auth:', error);\r\n        localStorage.removeItem('user');\r\n        if (requiredRole) {\r\n          router.push('/login');\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, [requiredRole, router]);\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n    router.push('/login');\r\n  };\r\n\r\n  return { user, loading, logout };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAMO,SAAS,QAAQ,YAAiC;IACvD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,aAAa,aAAa,OAAO,CAAC;gBACxC,IAAI,YAAY;oBACd,MAAM,aAAa,KAAK,KAAK,CAAC;oBAE9B,6BAA6B;oBAC7B,IAAI,gBAAgB,WAAW,IAAI,KAAK,cAAc;wBACpD,oCAAoC;wBACpC,IAAI,WAAW,IAAI,KAAK,SAAS;4BAC/B,OAAO,IAAI,CAAC;wBACd,OAAO;4BACL,OAAO,IAAI,CAAC;wBACd;wBACA;oBACF;oBAEA,QAAQ;gBACV,OAAO,IAAI,cAAc;oBACvB,qEAAqE;oBACrE,OAAO,IAAI,CAAC;gBACd;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,aAAa,UAAU,CAAC;gBACxB,IAAI,cAAc;oBAChB,OAAO,IAAI,CAAC;gBACd;YACF,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAAc;KAAO;IAEzB,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,OAAO;QAAE;QAAM;QAAS;IAAO;AACjC"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yasukeo/Desktop/NoSQL/flight-management/src/components/AdminNav.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { usePathname } from 'next/navigation';\r\n\r\nexport default function AdminNav() {\r\n  const { user, loading, logout } = useAuth('admin');\r\n  const pathname = usePathname();\r\n\r\n  if (loading) {\r\n    return (\r\n      <nav className=\"bg-purple-700 text-white shadow-lg\">\r\n        <div className=\"max-w-7xl mx-auto px-4\">\r\n          <div className=\"flex justify-between items-center h-16\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"text-xl font-bold flex items-center space-x-2\">\r\n                <span>✈️</span>\r\n                <span>SkyFlight Admin</span>\r\n              </span>\r\n            </div>\r\n            <div className=\"animate-pulse bg-purple-600 h-8 w-32 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null; // Will redirect in useAuth\r\n  }\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  return (\r\n    <nav className=\"bg-purple-700 text-white shadow-lg\">\r\n      <div className=\"max-w-7xl mx-auto px-4\">\r\n        <div className=\"flex justify-between items-center h-16\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Link href=\"/\" className=\"text-xl font-bold flex items-center space-x-2\">\r\n              <span>✈️</span>\r\n              <span>SkyFlight Admin</span>\r\n            </Link>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Link \r\n              href=\"/admin\" \r\n              className={`px-3 py-2 rounded ${isActive('/admin') ? 'bg-purple-800' : 'hover:bg-purple-600'}`}\r\n            >\r\n              Dashboard\r\n            </Link>\r\n            <Link \r\n              href=\"/admin/flights\" \r\n              className={`px-3 py-2 rounded ${isActive('/admin/flights') ? 'bg-purple-800' : 'hover:bg-purple-600'}`}\r\n            >\r\n              Vols\r\n            </Link>\r\n            <Link \r\n              href=\"/admin/aircraft\" \r\n              className={`px-3 py-2 rounded ${isActive('/admin/aircraft') ? 'bg-purple-800' : 'hover:bg-purple-600'}`}\r\n            >\r\n              Avions\r\n            </Link>\r\n            <Link \r\n              href=\"/admin/employees\" \r\n              className={`px-3 py-2 rounded ${isActive('/admin/employees') ? 'bg-purple-800' : 'hover:bg-purple-600'}`}\r\n            >\r\n              Employés\r\n            </Link>\r\n            <Link \r\n              href=\"/admin/passengers\" \r\n              className={`px-3 py-2 rounded ${isActive('/admin/passengers') ? 'bg-purple-800' : 'hover:bg-purple-600'}`}\r\n            >\r\n              Passagers\r\n            </Link>\r\n            <Link \r\n              href=\"/admin/bookings\" \r\n              className={`px-3 py-2 rounded ${isActive('/admin/bookings') ? 'bg-purple-800' : 'hover:bg-purple-600'}`}\r\n            >\r\n              Réservations\r\n            </Link>\r\n            \r\n            {/* User info & Logout */}\r\n            <div className=\"border-l border-purple-500 pl-4 ml-2 flex items-center space-x-3\">\r\n              <span className=\"text-purple-200 text-sm\">{user.name}</span>\r\n              <button \r\n                onClick={logout}\r\n                className=\"bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded text-sm font-medium transition-colors\"\r\n              >\r\n                Déconnexion\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,kIAAO,EAAC;IAC1C,MAAM,WAAW,IAAA,iJAAW;IAE5B,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAK,WAAU;;kDACd,8OAAC;kDAAK;;;;;;kDACN,8OAAC;kDAAK;;;;;;;;;;;;;;;;;sCAGV,8OAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;IAKzB;IAEA,IAAI,CAAC,MAAM;QACT,OAAO,MAAM,2BAA2B;IAC1C;IAEA,MAAM,WAAW,CAAC,OAAiB,aAAa;IAEhD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,uKAAI;4BAAC,MAAK;4BAAI,WAAU;;8CACvB,8OAAC;8CAAK;;;;;;8CACN,8OAAC;8CAAK;;;;;;;;;;;;;;;;;kCAGV,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAW,CAAC,kBAAkB,EAAE,SAAS,YAAY,kBAAkB,uBAAuB;0CAC/F;;;;;;0CAGD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAW,CAAC,kBAAkB,EAAE,SAAS,oBAAoB,kBAAkB,uBAAuB;0CACvG;;;;;;0CAGD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAW,CAAC,kBAAkB,EAAE,SAAS,qBAAqB,kBAAkB,uBAAuB;0CACxG;;;;;;0CAGD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAW,CAAC,kBAAkB,EAAE,SAAS,sBAAsB,kBAAkB,uBAAuB;0CACzG;;;;;;0CAGD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAW,CAAC,kBAAkB,EAAE,SAAS,uBAAuB,kBAAkB,uBAAuB;0CAC1G;;;;;;0CAGD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAW,CAAC,kBAAkB,EAAE,SAAS,qBAAqB,kBAAkB,uBAAuB;0CACxG;;;;;;0CAKD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAA2B,KAAK,IAAI;;;;;;kDACpD,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}}]
}